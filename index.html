<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Ø¨Ø§Ø²ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø¯Ø§Ø±ÙˆØ³Ø§Ø²ÛŒ</title>

<style>
    body {
        font-family: "Segoe UI", Tahoma, sans-serif;
        background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
        margin: 0;
        padding: 0;
    }

    .container {
        max-width: 800px;
        margin: 40px auto;
        background: #fff;
        border-radius: 12px;
        padding: 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        animation: fadeIn 0.8s ease-in;
    }

    h1, h2 {
        text-align: center;
        color: #2c3e50;
    }

    .info-bar {
        display: flex;
        justify-content: space-between;
        margin-bottom: 16px;
        font-weight: bold;
    }

    .question {
        font-size: 18px;
        margin-bottom: 16px;
    }

    .options button {
        width: 100%;
        margin: 6px 0;
        padding: 10px;
        border-radius: 8px;
        border: 1px solid #ccc;
        background: #ecf0f1;
        cursor: pointer;
        transition: background 0.3s;
    }

    .options button:hover {
        background: #dfe6e9;
    }

    .timer {
        color: #c0392b;
    }

    .hidden {
        display: none;
    }

    .result {
        text-align: center;
        font-size: 18px;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 600px) {
        .container {
            margin: 10px;
        }
    }
</style>
</head>

<body>

<div class="container">
    <h1>ğŸ“ Ø¨Ø§Ø²ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø¯Ø§Ø±ÙˆØ³Ø§Ø²ÛŒ</h1>

    <div id="game">
        <div class="info-bar">
            <div>Ø³Ø·Ø­: <span id="level">Ø¢Ø³Ø§Ù†</span></div>
            <div>Ø³Ú©Ù‡â€ŒÙ‡Ø§: <span id="coins">0</span></div>
            <div class="timer">â± <span id="time">20</span></div>
        </div>

        <div id="questionBox">
            <div class="question" id="questionText"></div>
            <div class="options" id="options"></div>
        </div>
    </div>

    <div id="result" class="hidden result">
        <h2>Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ</h2>
        <p>Ø§Ù…ØªÛŒØ§Ø² Ø´Ù…Ø§: <strong id="finalScore"></strong></p>
        <p>Ø¨Ù‡ØªØ±ÛŒÙ† Ø§Ù…ØªÛŒØ§Ø² Ù‚Ø¨Ù„ÛŒ: <strong id="bestScore"></strong></p>
        <p>ØªØ¹Ø¯Ø§Ø¯ Ø¯ÙØ¹Ø§Øª Ø¨Ø§Ø²ÛŒ: <strong id="playCount"></strong></p>
        <button onclick="startGame()">Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯</button>
    </div>
</div>

<script>
const questions = {
    easy: [
        {
            q: "Ú©Ø¯Ø§Ù… Ù…Ø³ÛŒØ± Ù…ØµØ±Ù Ø¯Ø§Ø±Ùˆ Ø³Ø±ÛŒØ¹â€ŒØªØ±ÛŒÙ† Ø§Ø«Ø± Ø±Ø§ Ø¯Ø§Ø±Ø¯ØŸ",
            options: ["Ø®ÙˆØ±Ø§Ú©ÛŒ", "Ø¹Ø¶Ù„Ø§Ù†ÛŒ", "ÙˆØ±ÛŒØ¯ÛŒ", "Ø²ÛŒØ±Ø¬Ù„Ø¯ÛŒ"],
            answer: 2
        },
        {
            q: "Ù†ÛŒÙ…Ù‡â€ŒØ¹Ù…Ø± Ø¯Ø§Ø±Ùˆ Ø¨Ù‡ Ú†Ù‡ Ù…Ø¹Ù†Ø§Ø³ØªØŸ",
            options: [
                "Ø²Ù…Ø§Ù† Ø¬Ø°Ø¨ Ú©Ø§Ù…Ù„",
                "Ø²Ù…Ø§Ù† Ø±Ø³ÛŒØ¯Ù† Ø¨Ù‡ Cmax",
                "Ø²Ù…Ø§Ù† Ú©Ø§Ù‡Ø´ ØºÙ„Ø¸Øª Ø¨Ù‡ Ù†ØµÙ",
                "Ø²Ù…Ø§Ù† Ø¯ÙØ¹ Ú©Ø§Ù…Ù„"
            ],
            answer: 2
        }
    ],
    medium: [
        {
            q: "Ú©Ø¯Ø§Ù… Ø¹Ø§Ù…Ù„ Ø¨ÛŒØ´ØªØ±ÛŒÙ† ØªØ£Ø«ÛŒØ± Ø±Ø§ Ø¨Ø± Ú©Ù„ÛŒØ±Ø§Ù†Ø³ Ú©Ø¨Ø¯ÛŒ Ø¯Ø§Ø±Ø¯ØŸ",
            options: [
                "Ø¬Ø±ÛŒØ§Ù† Ø®ÙˆÙ† Ú©Ø¨Ø¯",
                "pH Ù…Ø¹Ø¯Ù‡",
                "Ø­Ø¬Ù… ØªÙˆØ²ÛŒØ¹",
                "Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ù¾Ø±ÙˆØªØ¦ÛŒÙ†"
            ],
            answer: 0
        },
        {
            q: "Ø§ÙØ²Ø§ÛŒØ´ Ø­Ø¬Ù… ØªÙˆØ²ÛŒØ¹ (Vd) Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ú†Ù‡ Ø§Ø«Ø±ÛŒ Ø¯Ø§Ø±Ø¯ØŸ",
            options: [
                "Ú©Ø§Ù‡Ø´ Ù†ÛŒÙ…Ù‡â€ŒØ¹Ù…Ø±",
                "Ø§ÙØ²Ø§ÛŒØ´ Ù†ÛŒÙ…Ù‡â€ŒØ¹Ù…Ø±",
                "Ú©Ø§Ù‡Ø´ Ø¬Ø°Ø¨",
                "Ø§ÙØ²Ø§ÛŒØ´ Ú©Ù„ÛŒØ±Ø§Ù†Ø³"
            ],
            answer: 1
        }
    ],
    hard: [
        {
            q: "Ù…ØµØ±Ù Ù‡Ù…Ø²Ù…Ø§Ù† ÙˆØ§Ø±ÙØ§Ø±ÛŒÙ† Ùˆ Ø¢Ø³Ù¾ÛŒØ±ÛŒÙ† Ú†Ù‡ Ø®Ø·Ø±ÛŒ Ø¯Ø§Ø±Ø¯ØŸ",
            options: [
                "Ú©Ø§Ù‡Ø´ Ø§Ø«Ø± ÙˆØ§Ø±ÙØ§Ø±ÛŒÙ†",
                "Ø§ÙØ²Ø§ÛŒØ´ Ø®Ø·Ø± Ø®ÙˆÙ†Ø±ÛŒØ²ÛŒ",
                "Ú©Ø§Ù‡Ø´ Ø¬Ø°Ø¨",
                "Ø§ÙØ²Ø§ÛŒØ´ Ø¯ÙØ¹ Ú©Ù„ÛŒÙˆÛŒ"
            ],
            answer: 1
        },
        {
            q: "Ú©Ø¯Ø§Ù… Ø¢Ù†Ø²ÛŒÙ… Ø¨ÛŒØ´ØªØ±ÛŒÙ† Ù†Ù‚Ø´ Ø±Ø§ Ø¯Ø± Ù…ØªØ§Ø¨ÙˆÙ„ÛŒØ³Ù… Ø¯Ø§Ø±ÙˆÙ‡Ø§ Ø¯Ø§Ø±Ø¯ØŸ",
            options: ["CYP2D6", "CYP3A4", "MAO", "COMT"],
            answer: 1
        }
    ]
};

let currentLevel = "easy";
let questionIndex = 0;
let coins = 0;
let timer;
let timeLeft = 20;
let totalQuestions = 10;
let askedQuestions = [];

function startGame() {
    questionIndex = 0;
    coins = 0;
    currentLevel = "easy";
    askedQuestions = [];
    document.getElementById("result").classList.add("hidden");
    document.getElementById("game").classList.remove("hidden");
    loadQuestion();
}

function loadQuestion() {
    if (questionIndex >= totalQuestions) {
        endGame();
        return;
    }

    document.getElementById("level").textContent =
        currentLevel === "easy" ? "Ø¢Ø³Ø§Ù†" :
        currentLevel === "medium" ? "Ù…ØªÙˆØ³Ø·" : "Ø³Ø®Øª";

    document.getElementById("coins").textContent = coins.toFixed(1);

    const pool = questions[currentLevel];
    const q = pool[Math.floor(Math.random() * pool.length)];
    askedQuestions.push(q);

    document.getElementById("questionText").textContent = q.q;
    const optionsDiv = document.getElementById("options");
    optionsDiv.innerHTML = "";

    q.options.forEach((opt, idx) => {
        const btn = document.createElement("button");
        btn.textContent = opt;
        btn.onclick = () => answer(idx === q.answer);
        optionsDiv.appendChild(btn);
    });

    resetTimer();
}

function answer(correct) {
    clearInterval(timer);
    if (correct) {
        coins += 1;
        if (currentLevel === "easy") currentLevel = "medium";
        else if (currentLevel === "medium") currentLevel = "hard";
    } else {
        coins -= 0.5;
        if (currentLevel === "hard") currentLevel = "medium";
        else if (currentLevel === "medium") currentLevel = "easy";
    }
    questionIndex++;
    loadQuestion();
}

function resetTimer() {
    timeLeft = 20;
    document.getElementById("time").textContent = timeLeft;
    timer = setInterval(() => {
        timeLeft--;
        document.getElementById("time").textContent = timeLeft;
        if (timeLeft <= 0) {
            clearInterval(timer);
            answer(false);
        }
    }, 1000);
}

function endGame() {
    document.getElementById("game").classList.add("hidden");
    document.getElementById("result").classList.remove("hidden");

    let best = localStorage.getItem("bestScore") || 0;
    let plays = localStorage.getItem("playCount") || 0;

    plays++;
    if (coins > best) best = coins;

    localStorage.setItem("bestScore", best);
    localStorage.setItem("playCount", plays);

    document.getElementById("finalScore").textContent = coins.toFixed(1);
    document.getElementById("bestScore").textContent = best;
    document.getElementById("playCount").textContent = plays;
}

startGame();
</script>

</body>
</html>
